<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>唱片点播机</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#FF7D00',
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .rotate-center {
                animation: rotate-center 20s linear infinite;
            }
            .needle-animation {
                animation: needle-move 0.5s ease-out forwards;
            }
            .needle-back {
                animation: needle-back 0.5s ease-out forwards;
            }
        }

        @keyframes rotate-center {
            0% { transform: rotate(0); }
            100% { transform: rotate(360deg); }
        }

        @keyframes needle-move {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(15deg); }
        }

        @keyframes needle-back {
            0% { transform: rotate(15deg); }
            100% { transform: rotate(0deg); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-dark to-slate-800 min-h-screen font-inter text-light">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- 顶部标题 -->
        <header class="text-center mb-10">
            <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary mb-2 text-shadow">唱片点播机</h1>
            <p class="text-slate-400 text-lg">感受黑胶唱片带来的纯粹音乐体验</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- 唱片播放区域 - 占左侧1/3宽度 -->
            <div class="lg:col-span-1 relative flex flex-col items-center justify-center bg-slate-900/50 rounded-2xl p-8 backdrop-blur-sm border border-slate-700/50 shadow-2xl">
                <!-- 唱片机底座 -->
                <div class="w-full max-w-md h-auto relative">
                    <!-- 唱片 -->
                    <div class="relative mx-auto w-64 h-64 md:w-80 md:h-80">
                        <!-- 唱片外圈装饰 -->
                        <div class="absolute inset-0 rounded-full border-8 border-slate-700 shadow-inner"></div>
                        
                        <!-- 唱针 -->
                        <div id="needle" class="absolute top-0 right-0 w-24 h-32 transform origin-[20%_20%] z-20">
                            <div class="w-full h-full relative">
                                <div class="absolute top-0 left-0 w-full h-full bg-slate-400 rounded-full opacity-30"></div>
                                <div class="absolute top-2 left-2 w-20 h-20 bg-slate-600 rounded-full opacity-30"></div>
                                <div class="absolute top-4 left-4 w-16 h-16 bg-slate-800 rounded-full opacity-30"></div>
                                <div class="absolute top-6 left-6 w-12 h-12 bg-slate-900 rounded-full opacity-30"></div>
                                <div class="absolute top-8 left-8 w-8 h-8 bg-slate-700 rounded-full"></div>
                                <div class="absolute top-8 left-10 w-12 h-2 bg-slate-400 rounded-sm transform rotate-45"></div>
                                <div class="absolute top-14 left-20 w-4 h-1 bg-slate-300 rounded-sm transform rotate-45"></div>
                            </div>
                        </div>
                        
                        <!-- 唱片 -->
                        <div id="record" class="absolute inset-4 rounded-full bg-black overflow-hidden shadow-lg rotate-center paused">
                            <!-- 唱片外圈 -->
                            <div class="absolute inset-0 rounded-full border-2 border-slate-700"></div>
                            <!-- 唱片纹路 -->
                            <div class="absolute inset-4 rounded-full bg-black border-8 border-slate-800"></div>
                            <div class="absolute inset-8 rounded-full bg-black border-4 border-slate-700"></div>
                            <div class="absolute inset-12 rounded-full bg-black border-2 border-slate-600"></div>
                            <div class="absolute inset-16 rounded-full bg-black border border-slate-500"></div>
                            <div class="absolute inset-20 rounded-full bg-black border border-slate-400"></div>
                            <div class="absolute inset-24 rounded-full bg-black border border-slate-300"></div>
                            <!-- 唱片中心 -->
                            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-slate-400 flex items-center justify-center">
                                <div class="w-6 h-6 rounded-full bg-black"></div>
                            </div>
                            <!-- 唱片封面 -->
                            <div id="album-cover" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden border-4 border-slate-800">
                                <img id="album-img" src="https://picsum.photos/seed/music1/300/300" alt="唱片封面" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 歌曲信息 -->
                <div class="mt-8 text-center">
                    <h2 id="song-title" class="text-2xl font-bold mb-1">歌曲名称</h2>
                    <p id="song-artist" class="text-slate-400">歌手</p>
                </div>

                <!-- 播放控制 -->
                <div class="mt-6 flex flex-col items-center w-full max-w-md">
                    <!-- 进度条 -->
                    <div class="w-full mb-4 relative">
                        <div class="h-1.5 bg-slate-700 rounded-full overflow-hidden">
                            <div id="progress-bar" class="h-full bg-primary w-0 rounded-full transition-all duration-150"></div>
                        </div>
                        <div class="flex justify-between text-xs text-slate-400 mt-1">
                            <span id="current-time">0:00</span>
                            <span id="total-time">0:00</span>
                        </div>
                    </div>

                    <!-- 控制按钮 -->
                    <div class="flex items-center justify-center gap-6">
                        <button id="shuffle-btn" class="text-slate-400 hover:text-secondary transition-colors">
                            <i class="fa fa-random text-xl"></i>
                        </button>
                        <button id="prev-btn" class="text-slate-300 hover:text-white transition-colors">
                            <i class="fa fa-step-backward text-2xl"></i>
                        </button>
                        <button id="play-btn" class="w-14 h-14 bg-primary hover:bg-primary/90 rounded-full flex items-center justify-center shadow-lg transform hover:scale-105 transition-all">
                            <i class="fa fa-play text-white text-xl ml-1"></i>
                        </button>
                        <button id="next-btn" class="text-slate-300 hover:text-white transition-colors">
                            <i class="fa fa-step-forward text-2xl"></i>
                        </button>
                        <button id="repeat-btn" class="text-slate-400 hover:text-secondary transition-colors relative">
                            <i class="fa fa-repeat text-xl"></i>
                        </button>
                    </div>

                    <!-- 音量控制 -->
                    <div class="mt-6 flex items-center gap-3 w-full max-w-xs">
                        <i class="fa fa-volume-up text-slate-300"></i>
                        <input id="volume-slider" type="range" min="0" max="1" step="0.05" value="0.7" 
                               class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer">
                    </div>
                </div>
            </div>

            <!-- 歌词和歌曲列表 - 占右侧2/3宽度 -->
            <div class="lg:col-span-2 bg-slate-900/50 rounded-2xl p-8 backdrop-blur-sm border border-slate-700/50 shadow-2xl flex flex-col">
                <!-- 标签页导航 -->
                <div class="flex border-b border-slate-700 mb-6">
                    <button id="lyrics-tab" class="px-6 py-3 font-medium text-white border-b-2 border-primary">歌词</button>
                    <button id="playlist-tab" class="px-6 py-3 font-medium text-slate-400 hover:text-white transition-colors">歌曲列表</button>
                </div>

                <!-- 歌词显示区域 -->
                <div id="lyrics-container" class="flex-1 overflow-y-auto pr-2">
                    <div id="lyrics" class="text-center space-y-3 text-lg">
                        <p class="text-slate-400">点击播放按钮开始播放音乐</p>
                        <p class="text-slate-500">歌词将在这里显示</p>
                    </div>
                </div>

                <!-- 歌曲列表 -->
                <div id="playlist-container" class="hidden flex-1 overflow-y-auto pr-2">
                    <ul id="playlist" class="space-y-2">
                        <!-- 歌曲列表项会通过JavaScript动态添加 -->
                    </ul>
                </div>
            </div>
        </div>

        <!-- 页脚 -->
        <footer class="mt-12 text-center text-slate-500 text-sm">
            <p>© 2025 唱片点播机 - 享受音乐的美好时光</p>
        </footer>
    </div>

    <script>
        // 音乐数据 - 你可以添加更多歌曲
        const songs = [
            {
                title: "Summer Memories",
                artist: "音乐创作者",
                file: "music/song1.mp3", // 替换为你的音乐文件路径
                cover: "https://picsum.photos/seed/music1/300/300",
                lyrics: "music/song1.lrc" // 替换为你的歌词文件路径
            },
            {
                title: "Autumn Breeze",
                artist: "旋律大师",
                file: "music/song2.mp3", // 替换为你的音乐文件路径
                cover: "https://picsum.photos/seed/music2/300/300",
                lyrics: "music/song2.lrc" // 替换为你的歌词文件路径
            },
            {
                title: "Winter Night",
                artist: "声音诗人",
                file: "music/song3.mp3", // 替换为你的音乐文件路径
                cover: "https://picsum.photos/seed/music3/300/300",
                lyrics: "music/song3.lrc" // 替换为你的歌词文件路径
            }
        ];

        // 当前播放歌曲索引
        let currentSongIndex = 0;
        // 音乐元素
        let audio = new Audio();
        // 歌词解析结果
        let lyrics = [];
        // 播放状态
        let isPlaying = false;
        // 重复模式：0-不重复，1-单曲循环，2-列表循环
        let repeatMode = 2;
        // 随机播放状态
        let isShuffle = false;
        // 上一次随机播放的索引
        let lastShuffleIndex = -1;

        // DOM 元素
        const record = document.getElementById('record');
        const needle = document.getElementById('needle');
        const playBtn = document.getElementById('play-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const currentTimeEl = document.getElementById('current-time');
        const totalTimeEl = document.getElementById('total-time');
        const volumeSlider = document.getElementById('volume-slider');
        const songTitle = document.getElementById('song-title');
        const songArtist = document.getElementById('song-artist');
        const albumImg = document.getElementById('album-img');
        const lyricsContainer = document.getElementById('lyrics-container');
        const playlistContainer = document.getElementById('playlist-container');
        const lyricsTab = document.getElementById('lyrics-tab');
        const playlistTab = document.getElementById('playlist-tab');
        const playlist = document.getElementById('playlist');
        const repeatBtn = document.getElementById('repeat-btn');
        const shuffleBtn = document.getElementById('shuffle-btn');
        const lyricsEl = document.getElementById('lyrics');

        // 初始化
        function init() {
            // 加载第一首歌曲
            loadSong(songs[currentSongIndex]);
            
            // 创建歌曲列表
            createPlaylist();
            
            // 注册事件监听器
            registerEventListeners();
        }

        // 加载歌曲
        function loadSong(song) {
            audio.src = song.file;
            songTitle.textContent = song.title;
            songArtist.textContent = song.artist;
            albumImg.src = song.cover;
            albumImg.alt = `${song.title} - ${song.artist} 专辑封面`;
            
            // 重置状态
            isPlaying = false;
            updatePlayButton();
            record.classList.add('paused');
            needle.classList.remove('needle-animation');
            needle.classList.add('needle-back');
            
            // 加载歌词
            loadLyrics(song.lyrics);
            
            // 更新歌曲列表中的当前选中项
            updateActiveSongInPlaylist();
        }

        // 加载歌词
        function loadLyrics(lyricsPath) {
            // 清空当前歌词
            lyrics = [];
            lyricsEl.innerHTML = '<p class="text-slate-400">歌词加载中...</p>';
            
            // 模拟加载歌词 - 实际应用中应该从lyricsPath加载歌词文件
            setTimeout(() => {
                // 这里使用示例歌词，实际应用中应该解析lrc文件内容
                lyrics = [
                    { time: 0, text: "歌曲加载中..." },
                    { time: 5, text: "这是一首美妙的歌曲" },
                    { time: 10, text: "你可以在这里享受音乐" },
                    { time: 15, text: "随着旋律摇摆" },
                    { time: 20, text: "感受每一个音符" },
                    { time: 25, text: "让音乐带你飞翔" },
                    { time: 30, text: "沉浸在音乐的世界" },
                    { time: 35, text: "享受这美好时光" },
                    { time: 40, text: "音乐是心灵的语言" },
                    { time: 45, text: "让我们一起聆听" },
                    { time: 50, text: "感受音乐的魅力" },
                    { time: 55, text: "每一个音符都是故事" },
                    { time: 60, text: "让音乐持续播放" }
                ];
                
                // 显示初始歌词
                displayLyrics();
            }, 500);
        }

        // 显示歌词
        function displayLyrics() {
            lyricsEl.innerHTML = '';
            
            if (lyrics.length === 0) {
                lyricsEl.innerHTML = '<p class="text-slate-400">暂无歌词</p>';
                return;
            }
            
            // 获取当前播放时间
            const currentTime = audio.currentTime;
            
            // 查找当前应该高亮的歌词行
            let currentLineIndex = 0;
            for (let i = 0; i < lyrics.length - 1; i++) {
                if (currentTime >= lyrics[i].time && currentTime < lyrics[i + 1].time) {
                    currentLineIndex = i;
                    break;
                }
            }
            
            // 如果当前时间超过了最后一行歌词的时间，则高亮最后一行
            if (currentTime >= lyrics[lyrics.length - 1].time) {
                currentLineIndex = lyrics.length - 1;
            }
            
            // 显示歌词，高亮当前行
            lyrics.forEach((line, index) => {
                const lineEl = document.createElement('p');
                lineEl.textContent = line.text;
                
                if (index === currentLineIndex) {
                    lineEl.className = 'text-primary font-medium';
                } else {
                    lineEl.className = 'text-slate-400 hover:text-white transition-colors';
                }
                
                lyricsEl.appendChild(lineEl);
            });
            
            // 滚动到当前歌词行
            if (currentLineIndex > 0) {
                const currentLineElement = lyricsEl.children[currentLineIndex];
                if (currentLineElement) {
                    currentLineElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        }

        // 创建歌曲列表
        function createPlaylist() {
            playlist.innerHTML = '';
            
            songs.forEach((song, index) => {
                const songItem = document.createElement('li');
                songItem.className = `flex items-center p-3 rounded-lg hover:bg-slate-800/50 transition-colors cursor-pointer ${index === currentSongIndex ? 'bg-slate-800/70 border-l-4 border-primary' : ''}`;
                
                songItem.innerHTML = `
                    <div class="w-10 h-10 rounded-full overflow-hidden mr-4">
                        <img src="${song.cover}" alt="${song.title} 封面" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1">
                        <h3 class="font-medium">${song.title}</h3>
                        <p class="text-sm text-slate-400">${song.artist}</p>
                    </div>
                    <div class="text-slate-400">
                        ${index === currentSongIndex ? '<i class="fa fa-play-circle text-primary"></i>' : ''}
                    </div>
                `;
                
                songItem.addEventListener('click', () => {
                    if (index !== currentSongIndex) {
                        currentSongIndex = index;
                        loadSong(songs[currentSongIndex]);
                        playSong();
                    }
                });
                
                playlist.appendChild(songItem);
            });
        }

        // 更新歌曲列表中的当前选中项
        function updateActiveSongInPlaylist() {
            const songItems = playlist.querySelectorAll('li');
            
            songItems.forEach((item, index) => {
                if (index === currentSongIndex) {
                    item.classList.add('bg-slate-800/70', 'border-l-4', 'border-primary');
                    item.querySelector('div:last-child').innerHTML = '<i class="fa fa-play-circle text-primary"></i>';
                } else {
                    item.classList.remove('bg-slate-800/70', 'border-l-4', 'border-primary');
                    item.querySelector('div:last-child').innerHTML = '';
                }
            });
        }

        // 播放歌曲
        function playSong() {
            audio.play();
            isPlaying = true;
            updatePlayButton();
            record.classList.remove('paused');
            needle.classList.remove('needle-back');
            needle.classList.add('needle-animation');
        }

        // 暂停歌曲
        function pauseSong() {
            audio.pause();
            isPlaying = false;
            updatePlayButton();
            record.classList.add('paused');
            needle.classList.remove('needle-animation');
            needle.classList.add('needle-back');
        }

        // 更新播放按钮
        function updatePlayButton() {
            if (isPlaying) {
                playBtn.innerHTML = '<i class="fa fa-pause text-white text-xl"></i>';
            } else {
                playBtn.innerHTML = '<i class="fa fa-play text-white text-xl ml-1"></i>';
            }
        }

        // 更新进度条
        function updateProgress() {
            const { duration, currentTime } = audio;
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
            
            // 更新时间显示
            currentTimeEl.textContent = formatTime(currentTime);
            totalTimeEl.textContent = formatTime(duration);
            
            // 更新歌词显示
            displayLyrics();
        }

        // 格式化时间
        function formatTime(timeInSeconds) {
            if (isNaN(timeInSeconds)) return '0:00';
            
            const minutes = Math.floor(timeInSeconds / 60);
            const seconds = Math.floor(timeInSeconds % 60);
            
            return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }

        // 设置进度
        function setProgress(e) {
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const duration = audio.duration;
            
            audio.currentTime = (clickX / width) * duration;
        }

        // 设置音量
        function setVolume() {
            audio.volume = this.value;
        }

        // 下一首歌曲
        function nextSong() {
            if (isShuffle) {
                // 随机播放模式
                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * songs.length);
                } while (randomIndex === currentSongIndex && songs.length > 1);
                
                lastShuffleIndex = currentSongIndex;
                currentSongIndex = randomIndex;
            } else {
                // 顺序播放模式
                currentSongIndex = (currentSongIndex + 1) % songs.length;
            }
            
            loadSong(songs[currentSongIndex]);
            playSong();
        }

        // 上一首歌曲
        function prevSong() {
            if (isShuffle && lastShuffleIndex !== -1) {
                // 如果是随机播放，且有上一次的随机索引，则回到上一次的歌曲
                currentSongIndex = lastShuffleIndex;
                lastShuffleIndex = -1;
            } else {
                // 顺序播放模式
                currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            }
            
            loadSong(songs[currentSongIndex]);
            playSong();
        }

        // 切换重复模式
        function toggleRepeatMode() {
            repeatMode = (repeatMode + 1) % 3;
            
            switch (repeatMode) {
                case 0: // 不重复
                    repeatBtn.innerHTML = '<i class="fa fa-repeat text-xl"></i>';
                    repeatBtn.classList.remove('text-secondary');
                    break;
                case 1: // 单曲循环
                    repeatBtn.innerHTML = '<i class="fa fa-repeat text-xl"></i><span class="absolute text-[8px] top-0 right-0">1</span>';
                    repeatBtn.classList.add('text-secondary');
                    break;
                case 2: // 列表循环
                    repeatBtn.innerHTML = '<i class="fa fa-repeat text-xl"></i>';
                    repeatBtn.classList.add('text-secondary');
                    break;
            }
        }

        // 切换随机播放
        function toggleShuffle() {
            isShuffle = !isShuffle;
            
            if (isShuffle) {
                shuffleBtn.classList.add('text-secondary');
            } else {
                shuffleBtn.classList.remove('text-secondary');
                lastShuffleIndex = -1;
            }
        }

        // 注册事件监听器
        function registerEventListeners() {
            // 播放/暂停按钮
            playBtn.addEventListener('click', () => {
                if (isPlaying) {
                    pauseSong();
                } else {
                    playSong();
                }
            });
            
            // 上一首/下一首按钮
            prevBtn.addEventListener('click', prevSong);
            nextBtn.addEventListener('click', nextSong);
            
            // 进度条更新
            audio.addEventListener('timeupdate', updateProgress);
            
            // 进度条点击
            progressBar.parentElement.addEventListener('click', setProgress);
            
            // 音量控制
            volumeSlider.addEventListener('input', setVolume);
            
            // 歌曲结束
            audio.addEventListener('ended', () => {
                if (repeatMode === 1) {
                    // 单曲循环
                    audio.currentTime = 0;
                    playSong();
                } else {
                    // 下一首
                    nextSong();
                }
            });
            
            // 标签页切换
            lyricsTab.addEventListener('click', () => {
                lyricsTab.classList.add('text-white', 'border-b-2', 'border-primary');
                lyricsTab.classList.remove('text-slate-400');
                playlistTab.classList.remove('text-white', 'border-b-2', 'border-primary');
                playlistTab.classList.add('text-slate-400');
                
                lyricsContainer.classList.remove('hidden');
                playlistContainer.classList.add('hidden');
            });
            
            playlistTab.addEventListener('click', () => {
                playlistTab.classList.add('text-white', 'border-b-2', 'border-primary');
                playlistTab.classList.remove('text-slate-400');
                lyricsTab.classList.remove('text-white', 'border-b-2', 'border-primary');
                lyricsTab.classList.add('text-slate-400');
                
                playlistContainer.classList.remove('hidden');
                lyricsContainer.classList.add('hidden');
            });
            
            // 重复模式切换
            repeatBtn.addEventListener('click', toggleRepeatMode);
            
            // 随机播放切换
            shuffleBtn.addEventListener('click', toggleShuffle);
        }

        // 初始化应用
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
    
